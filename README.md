# Student Enquiry Site

This is a minimal Next.js app to collect student enquiries and let an admin view them. Uses Supabase (Postgres) for storage and Vercel for deployment.

## Overview

- Public form at `/` — submits to `/api/enquiry`.
- Admin page at `/admin` — protected by Basic Auth (ADMIN_USER / ADMIN_PASS).
- Data stored in Supabase table `enquiries`.

## Supabase setup

1. Create account at https://supabase.com and create a new project (free tier).
2. Open SQL editor and run the table creation SQL below.

SQL to create table:

```sql
create table enquiries (
  id bigint generated by default as identity primary key,
  first_name text,
  middle_name text,
  surname text,
  class_name text,
  college_name text,
  medium text,
  date_of_birth date,
  mobile_parent text,
  mobile_student text,
  whatsapp text,
  father_occupation text,
  address text,
  foundation text,
  courses text,
  siblings text,
  reference text,
  remark text,
  created_at timestamptz default now()
);
```

3. In Supabase Project Settings -> API, copy the URL (SUPABASE_URL).
4. In Supabase Project Settings -> API -> Service Key, copy the Service Role key (SUPABASE_SERVICE_ROLE_KEY). Keep it secret — only used server-side.

## Vercel setup

1. Push this repository to GitHub.
2. Go to https://vercel.com, import the GitHub repo and deploy using Next.js defaults.
3. Set these Environment Variables in Vercel (Project Settings -> Environment Variables):
   - SUPABASE_URL = (from Supabase)
   - SUPABASE_SERVICE_ROLE_KEY = (service_role key) — keep it secret
   - ADMIN_USER = your_admin_username
   - ADMIN_PASS = your_admin_password

Important: Do NOT put SUPABASE_SERVICE_ROLE_KEY in client-side code. It's used only in server code (API route / getServerSideProps).

## Accessing Admin

Open `/admin` in browser. Your browser will prompt for username/password (Basic Auth). Use ADMIN_USER and ADMIN_PASS set in env.

## Alternatives / Notes

- If you prefer not to use Supabase: alternatives are Firebase (Firestore), Airtable, or Google Sheets (via API). Supabase gives you a proper Postgres database with SQL & table panel (recommended).
- For real production use, replace Basic Auth with a proper auth flow (Supabase Auth or other).
- The sample form is minimal. You can style it with Tailwind or Bootstrap and add client-side validation.
